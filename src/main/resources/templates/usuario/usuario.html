<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JKM Confecciones - Mi Perfil y Cotizaciones</title>

    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Carga de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- CONFIGURACIÓN PERSONALIZADA DE TAILWIND (Reutilizando paleta de colores JKM) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primario-rojo': '#C50614',       
                        'primario-azul-oscuro': '#052F5E',
                        'secundario-rojo-oscuro': '#9A1E2E',
                        'fondo-blanco-hueso': '#FFFFFF',    
                        'carbon': '#212529',              
                        'gris-claro-aura': '#E0E0E0', 
                        'lavanda-suave': '#D4C4E7',     
                        'crema-claro': '#F5F5DC',        
                        'exito-verde': '#588157',           
                        'alerta-oro': '#D4A373',            
                        'error-rojo': '#BA181B',            
                    },
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif'],
                    },
                    spacing: {
                        'md': '1rem',
                        'lg': '1.5rem',
                        'xl': '2rem',
                        '2xl': '3rem',
                    },
                },
            },
        }
    </script>
    <!-- Estilos personalizados -->
    <style>
        .card-jkm-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .container-jkm {
            max-width: 1280px;
        }
        /* Estilo activo para las pestañas de Perfil (similar al diseño de la imagen) */
        .tab-active {
            color: #052F5E; /* primario-azul-oscuro */
            border-bottom-width: 2px;
            border-color: #052F5E; 
            font-weight: 600;
        }
    </style>
</head>

<body class="bg-gray-50 font-poppins text-carbon min-h-screen flex flex-col">

    <!-- 1. ENCABEZADO (HEADER) - Simplificado -->
    <header class="shadow-md bg-primario-azul-oscuro">
        <div class="container-jkm mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-4">
            <!-- Logo JKM -->
            <h2 class="text-2xl md:text-3xl font-bold text-fondo-blanco-hueso">
                <span class="text-primario-rojo">JKM</span> Confecciones
            </h2>
            
            <!-- Links y Perfil -->
            <nav class="flex items-center space-x-6">
                <a href="#" class="text-fondo-blanco-hueso hover:text-lavanda-suave transition duration-150 hidden md:block">Inicio</a>
                <a href="/catalogoColegios" class="text-fondo-blanco-hueso hover:text-lavanda-suave transition duration-150 hidden md:block">Catálogo</a>
                
                <!-- Icono de Carrito -->
                <button aria-label="Carrito de Pedidos" class="text-fondo-blanco-hueso hover:text-lavanda-suave p-2 rounded-full transition duration-150 relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.38a2 2 0 0 0 2-1.58l1.65-7.43H5.1"/><path d="M18 10h-2"/></svg>
                    <span class="absolute top-1 right-1 h-4 w-4 bg-primario-rojo rounded-full flex items-center justify-center text-xs text-white font-bold" style="font-size: 0.65rem;">3</span>
                </button>

                 <!-- Avatar de Usuario -->
                 <div class="relative">
                    <img 
                        src="https://placehold.co/40x40/D4C4E7/052F5E?text=SR" 
                        alt="Perfil de Usuario" 
                        class="w-10 h-10 rounded-full border-2 border-lavanda-suave cursor-pointer"
                        onclick="toggleMenu('user-menu')"
                    >
                    <!-- Menú Desplegable de Usuario (Oculto por defecto) -->
                    <div id="user-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-1 z-20 hidden">
                        <a href="#" class="block px-4 py-2 text-sm text-carbon hover:bg-gray-100">Mi Perfil</a>
                        <a href="#" class="block px-4 py-2 text-sm text-carbon hover:bg-gray-100">Cerrar Sesión</a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- 2. CONTENIDO PRINCIPAL: DASHBOARD DEL CLIENTE -->
    <main class="flex-grow container-jkm mx-auto px-4 sm:px-6 lg:px-8 py-xl">
        
        <h1 class="text-3xl font-extrabold text-primario-azul-oscuro mb-xl border-b pb-4">
            Panel de Control del Cliente
        </h1>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-xl">
            
            <!-- Columna de Navegación (Sidebar) -->
            <nav class="lg:col-span-1">
                <div class="bg-fondo-blanco-hueso rounded-xl card-jkm-shadow p-4 sticky top-4">
                    <h3 class="text-lg font-semibold text-carbon mb-3">Menú de Cliente</h3>
                    <ul class="space-y-1">
                        <li>
                            <button 
                                id="nav-profile"
                                class="w-full text-left flex items-center p-3 rounded-lg transition duration-150 font-medium bg-lavanda-suave text-primario-azul-oscuro" 
                                onclick="showSection('profile')"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                Mi Perfil & Datos
                            </button>
                        </li>
                        <li>
                            <button 
                                id="nav-history"
                                class="w-full text-left flex items-center p-3 rounded-lg transition duration-150 hover:bg-gris-claro-aura text-carbon" 
                                onclick="showSection('history')"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                Historial de Cotizaciones
                            </button>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Columna de Contenido Dinámico -->
            <section class="lg:col-span-3">
                
                <!-- 2.1. SECCIÓN: MI PERFIL & DATOS (Visible por defecto) -->
                <div id="profile-section" class="content-section">
                    <h2 class="text-2xl font-bold text-primario-azul-oscuro mb-6">
                        Mi Perfil & Datos
                    </h2>

                    <!-- Barra de Progreso del Perfil -->
                    <div class="mb-6 p-4 bg-white rounded-xl card-jkm-shadow">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-carbon">Perfil Completo</span>
                            <span id="profile-progress-text" class="text-sm font-semibold text-primario-azul-oscuro">60%</span>
                        </div>
                        <div class="w-full bg-gris-claro-aura rounded-full h-2.5">
                            <div id="profile-progress-bar" class="bg-primario-azul-oscuro h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 60%"></div>
                        </div>
                    </div>

                    <!-- Pestañas de Edición -->
                    <div class="bg-fondo-blanco-hueso rounded-xl card-jkm-shadow p-6">
                        <div class="flex border-b border-gray-200 mb-6 space-x-6 overflow-x-auto">
                            <button id="tab-personales" class="py-3 px-1 border-b-2 border-transparent text-gray-500 hover:text-primario-azul-oscuro transition duration-150 tab-active" onclick="showTab('personales')">
                                Datos Personales
                            </button>
                            <button id="tab-direcciones" class="py-3 px-1 border-b-2 border-transparent text-gray-500 hover:text-primario-azul-oscuro transition duration-150" onclick="showTab('direcciones')">
                                Direcciones y Facturación
                            </button>
                            <button id="tab-preferencias" class="py-3 px-1 border-b-2 border-transparent text-gray-500 hover:text-primario-azul-oscuro transition duration-150" onclick="showTab('preferencias')">
                                Preferencias de Uniformes
                            </button>
                        </div>

                        <!-- Contenido de las Pestañas -->
                        <div id="tab-content-personales" class="tab-content">
                            <form class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="name" class="block text-sm font-medium text-carbon mb-1">Nombre Completo</label>
                                        <input type="text" id="name" value="Sofia Ramirez" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-primario-rojo focus:border-primario-rojo" disabled>
                                    </div>
                                    <div>
                                        <label for="email" class="block text-sm font-medium text-carbon mb-1">Correo Electrónico</label>
                                        <input type="email" id="email" value="sofia.ramirez@email.com" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-primario-rojo focus:border-primario-rojo" disabled>
                                    </div>
                                </div>
                                <div>
                                    <label for="phone" class="block text-sm font-medium text-carbon mb-1">Teléfono</label>
                                    <input type="tel" id="phone" value="+51 987 654 321" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-primario-rojo focus:border-primario-rojo" disabled>
                                </div>
                                <div class="pt-4">
                                    <button type="button" id="edit-button-personales" class="bg-primario-rojo text-white font-semibold py-2 px-6 rounded-lg transition duration-150 hover:bg-secundario-rojo-oscuro shadow-md" onclick="toggleEditMode('personales')">
                                        Activar Edición
                                    </button>
                                    <button type="submit" id="save-button-personales" class="bg-primario-azul-oscuro text-white font-semibold py-2 px-6 rounded-lg transition duration-150 hover:bg-primario-rojo shadow-md ml-3 hidden">
                                        Guardar Cambios
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <div id="tab-content-direcciones" class="tab-content hidden">
                            <h4 class="text-xl font-semibold mb-4 text-primario-azul-oscuro">Direcciones de Envío</h4>
                            <p class="text-gray-600 mb-4">Aún no has agregado ninguna dirección de envío o facturación. Agrega una nueva dirección para cotizaciones futuras.</p>
                            <button class="bg-primario-azul-oscuro text-white font-semibold py-2 px-4 rounded-lg transition duration-150 hover:bg-primario-rojo">
                                + Agregar Nueva Dirección
                            </button>
                        </div>

                        <div id="tab-content-preferencias" class="tab-content hidden">
                            <h4 class="text-xl font-semibold mb-4 text-primario-azul-oscuro">Tallas y Estilos Preferidos</h4>
                            
                            <!-- Tallas Frecuentes (Chips) -->
                            <div class="mb-6">
                                <span class="block text-sm font-medium text-carbon mb-2">Tallas Frecuentes</span>
                                <div class="flex flex-wrap gap-2">
                                    <span class="bg-gris-claro-aura text-carbon text-sm font-medium px-3 py-1 rounded-full border border-gray-300">Camisa: 10</span>
                                    <span class="bg-gris-claro-aura text-carbon text-sm font-medium px-3 py-1 rounded-full border border-gray-300">Pantalón: 32</span>
                                    <span class="bg-gris-claro-aura text-carbon text-sm font-medium px-3 py-1 rounded-full border border-gray-300">Chaqueta: M</span>
                                </div>
                            </div>

                            <!-- Estilos Preferidos (Chips) -->
                            <div>
                                <span class="block text-sm font-medium text-carbon mb-2">Estilos Preferidos</span>
                                <div class="flex flex-wrap gap-2">
                                    <span class="bg-primario-azul-oscuro text-white text-sm font-medium px-3 py-1 rounded-full border border-gray-300">Clásico</span>
                                    <span class="bg-gris-claro-aura text-carbon text-sm font-medium px-3 py-1 rounded-full border border-gray-300">Deportivo</span>
                                    <span class="bg-gris-claro-aura text-carbon text-sm font-medium px-3 py-1 rounded-full border border-gray-300">Formal</span>
                                </div>
                            </div>

                            <button class="bg-primario-rojo text-white font-semibold py-2 px-6 rounded-lg transition duration-150 hover:bg-secundario-rojo-oscuro shadow-md mt-6">
                                Editar Preferencias
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 2.2. SECCIÓN: HISTORIAL DE COTIZACIONES (Oculta por defecto) -->
                <div id="history-section" class="content-section hidden">
                    <h2 class="text-2xl font-bold text-primario-azul-oscuro mb-6">
                        Historial de Cotizaciones
                    </h2>
                    
                    <div class="space-y-6">
                        
                        <!-- Tarjeta de Cotización #12345 (Enviada) -->
                        <div class="bg-white rounded-xl card-jkm-shadow p-6 flex flex-col lg:flex-row justify-between items-start lg:items-center">
                            <div class="mb-4 lg:mb-0 lg:w-3/5">
                                <div class="flex items-center space-x-3 mb-1">
                                    <span class="text-lg font-bold text-primario-azul-oscuro">Cotización #12345</span>
                                    <span class="text-xs font-semibold px-3 py-1 rounded-full bg-alerta-oro text-carbon">Enviada</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">Colegio Santa María</p>
                                <p class="text-sm font-medium text-carbon">Total de Artículos: 150 | Fecha de Envío: 2024-07-26</p>
                                <a href="#" class="text-primario-rojo hover:text-secundario-rojo-oscuro text-sm mt-2 inline-flex items-center">
                                    Ver Detalles
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                                </a>
                            </div>
                            <!-- Imagen simulada (Estilizada para el panel) -->
                            <div class="w-full lg:w-1/4 h-32 rounded-lg overflow-hidden bg-gris-claro-aura">
                                <img src="https://placehold.co/300x128/E0E0E0/052F5E?text=Uniforme+Escolar" alt="Uniforme Cotizado" class="w-full h-full object-cover">
                            </div>
                        </div>

                        <!-- Tarjeta de Cotización #67890 (Aprobada) -->
                        <div class="bg-white rounded-xl card-jkm-shadow p-6 flex flex-col lg:flex-row justify-between items-start lg:items-center">
                            <div class="mb-4 lg:mb-0 lg:w-3/5">
                                <div class="flex items-center space-x-3 mb-1">
                                    <span class="text-lg font-bold text-primario-azul-oscuro">Cotización #67890</span>
                                    <span class="text-xs font-semibold px-3 py-1 rounded-full bg-exito-verde text-white">Aprobada</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">Colegio San Gabriel</p>
                                <p class="text-sm font-medium text-carbon">Total de Artículos: 200 | Fecha de Envío: 2024-07-20</p>
                                <a href="#" class="text-primario-rojo hover:text-secundario-rojo-oscuro text-sm mt-2 inline-flex items-center">
                                    Ver Factura
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                                </a>
                            </div>
                            <!-- Imagen simulada -->
                            <div class="w-full lg:w-1/4 h-32 rounded-lg overflow-hidden bg-gris-claro-aura">
                                <img src="https://placehold.co/300x128/D4C4E7/052F5E?text=Detalle+Aprobado" alt="Uniforme Aprobado" class="w-full h-full object-cover">
                            </div>
                        </div>
                        
                        <!-- Tarjeta de Cotización #11223 (Rechazada) -->
                        <div class="bg-white rounded-xl card-jkm-shadow p-6 flex flex-col lg:flex-row justify-between items-start lg:items-center opacity-70">
                            <div class="mb-4 lg:mb-0 lg:w-3/5">
                                <div class="flex items-center space-x-3 mb-1">
                                    <span class="text-lg font-bold text-primario-azul-oscuro">Cotización #11223</span>
                                    <span class="text-xs font-semibold px-3 py-1 rounded-full bg-error-rojo text-white">Rechazada</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">Colegio San Gabriel</p>
                                <p class="text-sm font-medium text-carbon">Total de Artículos: 100 | Fecha de Envío: 2024-07-15</p>
                                <a href="#" class="text-primario-rojo hover:text-secundario-rojo-oscuro text-sm mt-2 inline-flex items-center">
                                    Revisar Motivo
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                                </a>
                            </div>
                            <!-- Imagen simulada -->
                            <div class="w-full lg:w-1/4 h-32 rounded-lg overflow-hidden bg-gris-claro-aura">
                                <img src="https://placehold.co/300x128/E0E0E0/BA181B?text=Rechazada" alt="Uniforme Rechazado" class="w-full h-full object-cover">
                            </div>
                        </div>
                        
                    </div>
                </div>

            </section>
        </div>

    </main>

    <!-- 3. PIE DE PÁGINA (FOOTER) -->
    <footer class="bg-primario-azul-oscuro text-fondo-blanco-hueso py-6 mt-auto">
        <div class="container-jkm mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p class="mb-2 font-medium">JKM Confecciones | Calidad y Tradición en Uniformes</p>
            <p class="text-gray-500">© 2025 JKM Confecciones. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- 4. LÓGICA DE INTERACCIÓN -->
    <script>
        
        /**
         * Muestra la sección de contenido seleccionada (profile o history)
         * y actualiza el estilo de los botones del menú lateral.
         * @param {string} sectionId - 'profile' o 'history'
         */
        function showSection(sectionId) {
            const sections = ['profile', 'history'];
            
            sections.forEach(id => {
                const content = document.getElementById(`${id}-section`);
                const navButton = document.getElementById(`nav-${id}`);

                if (id === sectionId) {
                    content.classList.remove('hidden');
                    navButton.classList.add('bg-lavanda-suave', 'text-primario-azul-oscuro');
                    navButton.classList.remove('hover:bg-gris-claro-aura', 'text-carbon');
                } else {
                    content.classList.add('hidden');
                    navButton.classList.remove('bg-lavanda-suave', 'text-primario-azul-oscuro');
                    navButton.classList.add('hover:bg-gris-claro-aura', 'text-carbon');
                }
            });
        }

        /**
         * Muestra el contenido de la pestaña seleccionada en la sección de Perfil
         * y actualiza el estilo de la pestaña activa.
         * @param {string} tabId - 'personales', 'direcciones', o 'preferencias'
         */
        function showTab(tabId) {
            const tabs = ['personales', 'direcciones', 'preferencias'];

            tabs.forEach(id => {
                const tabContent = document.getElementById(`tab-content-${id}`);
                const tabButton = document.getElementById(`tab-${id}`);

                if (id === tabId) {
                    tabContent.classList.remove('hidden');
                    tabButton.classList.add('tab-active');
                    tabButton.classList.remove('text-gray-500', 'border-transparent');
                } else {
                    tabContent.classList.add('hidden');
                    tabButton.classList.remove('tab-active');
                    tabButton.classList.add('text-gray-500', 'border-transparent');
                }
            });
            // Asegura que al cambiar de pestaña, el modo de edición esté desactivado
            disableEditMode('personales');
        }

        /**
         * Alterna el modo de edición para la pestaña de Datos Personales.
         */
        function toggleEditMode(tabId) {
            const inputs = document.querySelectorAll(`#tab-content-${tabId} input`);
            const editButton = document.getElementById(`edit-button-${tabId}`);
            const saveButton = document.getElementById(`save-button-${tabId}`);

            const isEditing = editButton.textContent === 'Activar Edición';

            if (isEditing) {
                // Activar edición
                inputs.forEach(input => input.disabled = false);
                editButton.textContent = 'Cancelar Edición';
                editButton.classList.remove('bg-primario-rojo', 'hover:bg-secundario-rojo-oscuro');
                editButton.classList.add('bg-gray-400', 'hover:bg-gray-500');
                saveButton.classList.remove('hidden');
            } else {
                // Desactivar edición
                disableEditMode(tabId);
            }
        }

        /**
         * Desactiva el modo de edición sin guardar.
         */
        function disableEditMode(tabId) {
            const inputs = document.querySelectorAll(`#tab-content-${tabId} input`);
            const editButton = document.getElementById(`edit-button-${tabId}`);
            const saveButton = document.getElementById(`save-button-${tabId}`);

            inputs.forEach(input => input.disabled = true);
            editButton.textContent = 'Activar Edición';
            editButton.classList.remove('bg-gray-400', 'hover:bg-gray-500');
            editButton.classList.add('bg-primario-rojo', 'hover:bg-secundario-rojo-oscuro');
            saveButton.classList.add('hidden');
        }

        /**
         * Función para alternar el menú desplegable (e.g., el de perfil).
         */
        function toggleMenu(menuId) {
            document.getElementById(menuId).classList.toggle('hidden');
        }

        // Inicialización
        window.onload = () => {
            // Asegura que el perfil sea la sección inicial
            showSection('profile'); 
            showTab('personales');
        };
    </script>
</body>
</html>
