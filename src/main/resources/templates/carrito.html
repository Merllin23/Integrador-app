<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Carrito de Cotizaci√≥n ‚Äì JK Confecciones</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    /* Tailwind config opcional */
    tailwind.config = {
      theme: {
        extend: {
          colors: { brandBlue:"#0c2a4a", brandRed:"#b3131b", soft:"#e9edf3" }
        }
      }
    };
  </script>
  <style>
    .card-shadow { box-shadow: 0 6px 14px rgba(16,24,40,.08); }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">


  <header class="bg-brandBlue text-white">
    <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">

        <div class="w-10 h-10 rounded-full overflow-hidden bg-white/10 ring-1 ring-white/20">

          <img src="JKM_Confecciones.png" alt="Logo JK" class="w-full h-full object-cover">
        </div>
        <span class="text-xl font-semibold">JK Confecciones</span>
      </div>

      <nav class="hidden md:flex items-center gap-8 opacity-90">
        <a href="#" class="hover:opacity-100">Inicio</a>
        <a href="#" class="hover:opacity-100">Cat√°logo</a>
        <a href="#" class="hover:opacity-100">Nosotros</a>
        <a href="#" class="hover:opacity-100">Contacto</a>
      </nav>

      <div class="flex items-center gap-3">
        <button class="p-2 rounded hover:bg-white/10" title="Buscar">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24"><circle cx="11" cy="11" r="7"/><path d="m21 21-4.3-4.3"/></svg>
        </button>
        <button class="p-2 rounded hover:bg-white/10" title="Carrito">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
               viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round"
               d="M3 3h2l.4 2M7 13h10l3-8H6.4M7 13l-1.2 6h11.4M7 13L5.4 5M10 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm8 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>
        </button>
        <div class="w-8 h-8 rounded-full bg-white/20 grid place-items-center">üë§</div>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-6 grid grid-cols-1 lg:grid-cols-12 gap-6">

    <section class="lg:col-span-8">

      <div class="bg-white rounded-xl border border-slate-200 p-3 flex items-center gap-2 sticky top-4 z-10">
        <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24"><circle cx="11" cy="11" r="7"/><path d="m21 21-4.3-4.3"/></svg>
        <input id="searchInput" type="text" placeholder="Buscar"
               class="w-full outline-none placeholder:text-slate-400"/>
      </div>

      <div id="catalogo" class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-5">

      </div>
    </section>


    <aside class="lg:col-span-4">
      <div class="bg-white rounded-2xl border border-slate-200 p-6 sticky top-4">
        <h2 class="text-3xl font-extrabold leading-tight mb-6">Mi Lista de<br/>Cotizaci√≥n</h2>

        <div id="cartList" class="space-y-3 mb-5"></div>

        <textarea id="notes" rows="4"
          class="w-full rounded-xl border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 p-3"
          placeholder="Notas u observaciones (tallas, logos, bordados...)"></textarea>

       <a href="confirmacion.html"
   class="mt-5 w-full inline-flex items-center justify-center gap-3 rounded-xl bg-[#b3131b] text-white font-semibold py-4 hover:bg-red-700 transition">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"
       class="w-5 h-5 fill-white"><path d="M19.11 17.09a.86.86 0 0 0-.61-.27c-.16 0-.34-.01-.52-.01s-.48.07-.73.37c-.25.3-.83.96-.83.96s-.2.23-.53.09a8.7 8.7 0 0 1-2.6-1.61 10.1 10.1 0 0 1-1.88-2.31c-.27-.47.29-.67.29-.67s.33-.38.47-.58c.14-.2.15-.35.22-.58.07-.23.03-.44-.02-.6-.05-.16-.51-1.25-.7-1.71-.18-.46-.38-.39-.52-.39h-.45c-.15 0-.39.06-.6.29-.21.23-.81.79-.81 1.97s.83 2.32.95 2.48c.12.16 1.63 2.56 3.99 3.58 1.43.62 2 .67 2.72.57.44-.06 1.35-.55 1.55-1.08.2-.53.2-.98.15-1.08zM16 3C9.37 3 4 8.37 4 15c0 2.11.55 4.09 1.51 5.82L4 29l8.37-1.45A11.94 11.94 0 0 0 16 27c6.63 0 12-5.37 12-12S22.63 3 16 3z"/></svg>
  Confirmar y Enviar Solicitud de Cotizaci√≥n por WhatsApp
</a>

      </div>
    </aside>
  </main>

  <script>

    const productos = [
      { id:"u-sg-shot",   titulo:"Short - Colegio San Gabriel", colegio:"Colegio San Gabriel",
        img:"short.png" },
      { id:"u-sg-camisa", titulo:"Camisa - Colegio San Gabriel", colegio:"Colegio San Gabriel",
        img:"camisa.png" },
      { id:"u-sm-deportivo",   titulo:"Uniforme deportivo - Colegio Santa Mar√≠a", colegio:"Colegio Santa Mar√≠a",
        img:"deportivo.png" },
      { id:"u-sm-secundaria", titulo:"Uniforme de Secundaria - Colegio Santa Mar√≠a", colegio:"Colegio Santa Mar√≠a",
        img:"secundaria.png" },
    ];

    const CART_KEY = "jk_cart_v1";
    const $catalogo = document.getElementById("catalogo");
    const $cartList = document.getElementById("cartList");
    const $search   = document.getElementById("searchInput");
    const $notes    = document.getElementById("notes");
    const $waButton = document.getElementById("waButton");

    let cart = loadCart();

    function renderCatalogo(list = productos) {
      $catalogo.innerHTML = "";
      list.forEach(p => {
        const card = document.createElement("article");
        card.className = "group bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition";
        card.innerHTML = `
          <div class="aspect-[4/3] bg-soft overflow-hidden">
            <img src="${p.img}" alt="${p.titulo}" class="w-full h-full object-cover group-hover:scale-[1.03] transition"/>
          </div>
          <div class="p-3">
            <h3 class="font-semibold leading-snug">${p.titulo}</h3>
            <p class="text-sm text-slate-500 mt-1">${p.colegio}</p>
            <button data-id="${p.id}"
              class="mt-3 w-full rounded-lg bg-blue-600 text-white py-2.5 hover:bg-blue-700">A√±adir a la cotizaci√≥n</button>
          </div>`;
        $catalogo.appendChild(card);
      });
    }

    $catalogo.addEventListener("click", (e)=>{
      const btn = e.target.closest("button[data-id]");
      if (!btn) return;
      const id = btn.dataset.id;
      const prod = productos.find(p=>p.id===id);
      addToCart(prod);
    });

    $search.addEventListener("input", (e)=>{
      const q = e.target.value.toLowerCase();
      const filtered = productos.filter(p =>
        p.titulo.toLowerCase().includes(q) || p.colegio.toLowerCase().includes(q)
      );
      renderCatalogo(filtered);
    });

    function addToCart(prod){
      const found = cart.items.find(i=>i.id===prod.id);
      if(found) found.qty += 1;
      else cart.items.push({ id:prod.id, titulo:prod.titulo, colegio:prod.colegio, img:prod.img, qty:1 });
      saveCart(); renderCart();
    }

    function changeQty(id, delta){
      const it = cart.items.find(i=>i.id===id);
      if(!it) return;
      it.qty += delta;
      if (it.qty<=0) cart.items = cart.items.filter(i=>i.id!==id);
      saveCart(); renderCart();
    }

    function renderCart(){
      if (cart.items.length===0){
        $cartList.innerHTML = `<p class="text-slate-500">Tu lista est√° vac√≠a. A√±ade productos desde el cat√°logo.</p>`;
      } else {
        $cartList.innerHTML = cart.items.map(i=>`
          <div class="flex items-center gap-3 p-3 rounded-xl border border-slate-200">
            <img src="${i.img}" alt="" class="w-10 h-14 object-cover rounded"/>
            <div class="flex-1">
              <p class="font-semibold leading-tight">${(i.titulo.split(" - ")[0])}</p>
              <p class="text-sm text-slate-500">${i.colegio}</p>
            </div>
            <div class="flex items-center gap-2">
              <button class="w-8 h-8 grid place-items-center rounded-full border hover:bg-slate-100"
                      aria-label="Disminuir" onclick="changeQty('${i.id}',-1)">‚àí</button>
              <span class="w-6 text-center font-semibold">${i.qty}</span>
              <button class="w-8 h-8 grid place-items-center rounded-full border hover:bg-slate-100"
                      aria-label="Aumentar" onclick="changeQty('${i.id}',1)">+</button>
            </div>
          </div>
        `).join("");
      }
      $notes.value = cart.notes || "";
      updateWA();
    }

    $notes.addEventListener("input", ()=>{
      cart.notes = $notes.value;
      saveCart(); updateWA();
    });

    function updateWA(){

      const number = "";
      const resumen = cart.items.map(i => `‚Ä¢ ${i.titulo} (${i.colegio}) x ${i.qty}`).join("%0A");
      const notas   = cart.notes ? `%0A%0ANotas:%0A${encodeURIComponent(cart.notes)}` : "";
      const text    = `Hola, quisiera cotizar:%0A${resumen}${notas}`;
      const url     = `https://wa.me/${number}?text=${text}`;
      $waButton.href = url;
    }

    function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
    function loadCart(){
      try { return JSON.parse(localStorage.getItem(CART_KEY)) || {items:[], notes:""}; }
      catch { return {items:[], notes:""}; }
    }

    renderCatalogo();
    renderCart();
  </script>
</body>
</html>
